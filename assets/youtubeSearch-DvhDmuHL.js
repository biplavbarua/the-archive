import{u as y}from"./index-DKHN2eqF.js";const h={async search(p){const{youtubeApiKey:a}=y.getState(),u=`${p} official audio`;if(!a)return console.warn("YouTube API Key missing."),[];try{const s=await(await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(u)}&type=video&videoCategoryId=10&maxResults=20&key=${a}`)).json();return s.items?s.items.map(e=>{const c=e.snippet.title;let l=e.snippet.channelTitle.replace("VEVO","").trim(),i=c;if(i=i.replace(/\(Official Video\)/gi,"").replace(/\(Official Audio\)/gi,"").replace(/\(Lyrics\)/gi,"").replace(/\[.*?\]/g,"").trim(),i.includes(" - ")){const o=i.split(" - ");l=o[0].trim(),i=o[1].trim()}return{id:e.id.videoId,title:i,artist:l,year:new Date(e.snippet.publishedAt).getFullYear()||2024,energy:80,connections:["YouTube"]}}):[]}catch(n){return console.error("YouTube Search Error:",n),[]}},async getRelated(p,a,u){const{youtubeApiKey:n}=y.getState();if(!n)return[];const s=`${u} ${a} similar songs`;try{const c=await(await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(s)}&type=video&videoCategoryId=10&maxResults=10&key=${n}`)).json();return c.items?c.items.filter(t=>t.id.videoId!==p).map(t=>{const l=t.snippet.title;let o=t.snippet.channelTitle.replace("VEVO","").trim(),r=l;if(r=r.replace(/\(Official Video\)/gi,"").replace(/\(Official Audio\)/gi,"").replace(/\(Lyrics\)/gi,"").replace(/\[.*?\]/g,"").trim(),r.includes(" - ")){const d=r.split(" - ");o=d[0].trim(),r=d[1].trim()}return{id:t.id.videoId,title:r,artist:o,year:new Date(t.snippet.publishedAt).getFullYear()||2024,energy:60,connections:["Recommendation"]}}):[]}catch(e){return console.error("YouTube Related Error:",e),[]}}};export{h as youtubeSearchService};
